"use strict";var gifContainer=document.getElementById("gif-placeholder"),tag=document.createElement("script"),firstScriptTag=document.getElementsByTagName("script")[0],iframeContainer=document.querySelector(".video-container"),videoManager=document.querySelector(".video-manager"),closeVideo=document.querySelector(".close-video"),iframeContainerTop=iframeContainer.offsetTop,scrollOffsetTop=Math.floor(iframeContainerTop+iframeContainer.offsetHeight/2),scrollOffsetBottom=Math.floor(iframeContainerTop-iframeContainer.offsetHeight/2),player=void 0,iframe=void 0,state=void 0,app=new Vue({el:"#app",data:{departments:["Nacional","Amazonas","Antioquia","Arauca","Atlántico","Bogotá","Bolívar","Boyacá","Caldas","Caquetá","Casanare","Cauca","Cesar","Chocó","Córdoba","Cundinamarca","Guainía","Guaviare","Huila","La Guajira","Magdalena","Meta","Nariño","Norte de Santander","Putumayo","Quindío","Risaralda","San Andrés y Providencia","Santander","Sucre","Tolima","Valle del Cauca","Vaupés","Vichada"],reports:void 0,department:"Nacional",report:void 0},computed:{lastReport:function(){if(this.reports)return this.reports.reduce(function(e,t){return e.number>t.number?e:t})},results:function(){var t=this;if(this.report)return this.report.dpto.find(function(e){return e.name===t.department}).results},background:function(){var t=this;if(this.report){var e=this.report.dpto.find(function(e){return e.name===t.department}).gifs;return{background:"url(data/"+e[this.getRandomInt(0,e.length)]+") no-repeat center center"}}}},created:function(){this.getReports()},methods:{getReports:function(){var t=this;fetch("data/data.json").then(function(e){return e.json()}).then(function(e){t.reports=e.sort(function(e,t){return t.number-e.number}),t.report=t.reports[0]})},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e))+e}}});function onYouTubeIframeAPIReady(){player=new YT.Player("video-content",{height:"0",width:"0",videoId:"z7yqtW4Isec",playerVars:{showinfo:0,rel:0},events:{onReady:onReady,onStateChange:onStateChange}})}function onReady(e){iframe=player.getIframe(),addListeners()}function onStateChange(e){0===(state=e.data)&&iframe.classList.contains("is-playing")&&iframe.classList.remove("stick"),1===state&&iframe.classList.add("is-playing"),2!==state||iframe.classList.contains("stick")||iframe.classList.remove("is-playing")}function addListeners(){window.addEventListener("resize",function(){iframeContainerTop=iframeContainer.offsetTop,scrollOffsetTop=Math.floor(iframeContainerTop+iframeContainer.offsetHeight/2)}),window.addEventListener("scroll",function(){var e=window.pageYOffset;iframe.classList.toggle("stick",(scrollOffsetTop<e||e<scrollOffsetBottom)&&iframe.classList.contains("is-playing")),videoManager.classList.toggle("visible",iframe.classList.contains("stick"))}),closeVideo.addEventListener("click",function(e){e.preventDefault(),videoManager.classList.remove("visible"),iframe.classList.remove("stick"),iframe.classList.remove("is-playing"),player.pauseVideo()})}tag.src="https://www.youtube.com/iframe_api",firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);