<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=7">
	<title>Scrollytelling | Demo</title>
	<link rel="stylesheet" href="assets/css/shared.css">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
	<!-- Overlay for loading page -->
	<div id="overlay">
		<div class="container">
			<div class="overlay-nav">
				<div class="space"></div>
				<a href="https://www.datasketch.co/es" target="_blank" rel="noopener noreferrer"><img src="logo.png" alt="Datasketch"></a>
			</div>
		</div>
		<div class="sk-three-bounce">
	  	<div class="sk-child sk-bounce1"></div>
			<div class="sk-child sk-bounce2"></div>	
			<div class="sk-child sk-bounce3"></div>
		</div>
	</div>
	<div id="wrapper">
		<header class="nav-post">
			<div class="container-fluid">
				<div class="header-content">
					<!-- Hamburger menu -->
					<button class="hamburger hamburger--minus" type="button">
  					<span class="hamburger-box">
  						<span class="hamburger-inner"></span>
  					</span>
					</button>
					<!-- Datasketch logo -->
					<a href="https://www.datasketch.co/es/" target="_blank" rel="noopener noreferrer">
						<img src="assets/media/logo.png" alt="Datasketch" class="invert"></a>
				</div>
			</div>
			<div class="menu">
				<div class="menu-container">
					<div class="container-fluid">
						<ul class="navigation">
							<li><a href="#">Link 1</a></li>
							<li><a href="#">Link 2</a></li>
							<li><a href="#">Link 3</a></li>
							<li><a href="#">Link 4</a></li>
							<li><a href="#">Link 5</a></li>
							<li><a href="#">Link 6</a></li>
						</ul>
					</div>
					<div class="space"></div>
				</div>
			</div>
		</header>
		<main>
			<section id="scroll">
				<div class="graphic">
					<img src="assets/media/dog1.jpg" alt="" id="chart-1">
					<img src="assets/media/dog2.jpg" alt="" id="chart-2">
					<img src="assets/media/dog3.jpg" alt="" id="chart-3">
					<img src="assets/media/dog4.jpg" alt="" id="chart-4">
				</div>
				<div class="text">
					<div class="step" data-step="chart-1"><span>1</span></div>
					<div class="step" data-step="chart-2"><span>2</span></div>
					<div class="step" data-step="chart-3"><span>3</span></div>
					<div class="step" data-step="chart-4"><span>4</span></div>
				</div>
			</section>
			<div class="space"></div>
		</main>
		<footer>
			<div class="footer-container titillium">
				<p>Este es un trabajo de periodismo de datos del equipo de <a href="https://www.datasketch.co/es/team" target="_blank" rel="noopener noreferrer">Datasketch</a>. Revisa como creamos este especial en la <a href="#">metodología</a>.</p>
				<p>Todo el material en esta página es <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">CC-BY-SA</a>. Si reusas o adaptas recursos de esta página, por favor vincula y referencia nuestro artículo o sitio web</p>
				<img src="assets/media/ccbysa.png" alt="CC-BY-SA">
			</div>
		</footer>
	</div>
	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="vendors/scrollama/scrollama.min.js"></script>
	<script src="assets/js/shared.js"></script>
	<script src="assets/js/disqus.js"></script>
	<script>
		var container = $('#scroll');
		var graphic = $('.graphic');
		var text = $('.text');
		var step = $('.step');

		var scroller = scrollama();

		function onResize() {
			var stepHeight = window.innerHeight * 0.75;
			step.css('min-height', stepHeight + 'px');

			var textWidth = text.width();
			var graphicWidth = container.width() - textWidth - 1;
			var graphicHeight = Math.floor(window.innerHeight);

			graphic.css({
				'height': graphicHeight + 'px',
				'width': graphicWidth + 'px'
			})

			scroller.resize();
		}

		function handleStepEnter(response) {
			response.element.classList.add('is-active');
			$('#' + response.element.dataset.step).addClass('visible');
		}

		function handleStepExit(response) {
			response.element.classList.remove('is-active');
			$('#' + response.element.dataset.step).removeClass('visible');
		}

		function handleContainerEnter(response) {
			graphic.addClass('fixed');
			graphic.removeClass('bottom')
		}

		function handleContainerExit(response) {
			graphic.removeClass('fixed');
			if (response.direction === 'down') {
				graphic.addClass('bottom')
			}
		}

		function init() {
			onResize();

			scroller
				.setup({
					container: '#scroll',
					debug: true,
					graphic: '.graphic',
					offset: 0.33,
					step: '.text .step',
					text: '.text',
				})
				.onStepEnter(handleStepEnter)
				.onStepExit(handleStepExit)
				.onContainerEnter(handleContainerEnter)
				.onContainerExit(handleContainerExit)

			window.addEventListener('resize', onResize);
		}

		init();

	</script>
</body>
</html>
